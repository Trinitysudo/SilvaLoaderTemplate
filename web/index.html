<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SilvaLoader</title>
    
    <style>
        :root {
            --theme-primary: 255, 255, 255;
            --theme-glow: rgba(255, 255, 255, 0.3);
            --glass-opacity: 0.6;
        }
        
        /* Disable ALL dragging - FORCE */
        *, *::before, *::after, html, body, div, span, button, input {
            -webkit-app-region: no-drag !important;
        }
        
        /* Custom Titlebar */
        .custom-titlebar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 32px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 12px;
            z-index: 9999;
        }
        
        .titlebar-title {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 600;
            letter-spacing: 0.5px;
            pointer-events: none;
        }
        
        .titlebar-controls {
            -webkit-app-region: no-drag;
            display: flex;
            gap: 8px;
        }
        
        .titlebar-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            -webkit-app-region: no-drag;
        }
        
        .titlebar-btn:hover {
            transform: scale(1.1);
        }
        
        .btn-close {
            background: #ff5f56;
        }
        
        .btn-minimize {
            background: #ffbd2e;
        }
        
        .btn-maximize {
            background: #27c93f;
        }
        
        body {
            padding-top: 32px;
        }
    </style>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bg: '#050505',
                        surface: '#0a0a0a',
                        surfaceHighlight: '#141414',
                        accent: '#ffffff',
                        accentDim: '#a3a3a3',
                        border: '#333333'
                    },
                    fontFamily: {
                        mono: ['"JetBrains Mono"', 'monospace'],
                        sans: ['"Inter"', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'slide-up': 'slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 3s ease-in-out infinite',
                        'glow-pulse': 'glowPulse 2s ease-in-out infinite',
                        'scale-in': 'scaleIn 0.3s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        glowPulse: {
                            '0%, 100%': { boxShadow: '0 0 20px var(--theme-glow)' },
                            '50%': { boxShadow: '0 0 40px var(--theme-glow)' },
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.8)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        },
                    }
                }
            }
        }
    </script>

    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #050505;
            color: #ffffff;
            overflow: hidden;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        /* AERO GLASS EFFECT */
        .glass-panel {
            background: linear-gradient(
                135deg, 
                rgba(30, 30, 30, var(--glass-opacity)) 0%, 
                rgba(10, 10, 10, calc(var(--glass-opacity) + 0.2)) 100%
            );
            backdrop-filter: blur(25px) saturate(120%);
            -webkit-backdrop-filter: blur(25px) saturate(120%);
            
            /* Inner lighting/border for Aero look */
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-top: 1px solid rgba(255, 255, 255, 0.3);
            border-left: 1px solid rgba(255, 255, 255, 0.2);
            
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.5),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        /* Glossy overlay for buttons */
        .aero-btn {
            background: linear-gradient(to bottom, rgb(var(--theme-primary)) 0%, rgba(var(--theme-primary), 0.8) 100%);
            box-shadow: 
                0 4px 6px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(var(--theme-primary), 1),
                0 0 20px var(--theme-glow);
            color: #000;
        }
        .aero-btn:hover {
            background: linear-gradient(to bottom, rgb(var(--theme-primary)) 0%, rgba(var(--theme-primary), 0.9) 100%);
            box-shadow: 
                0 0 25px var(--theme-glow),
                inset 0 1px 0 rgba(var(--theme-primary), 1),
                0 0 40px var(--theme-glow);
        }

        /* Glitch effect on hover for title */
        .glitch-hover:hover {
            animation: glitch 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
            text-shadow: 2px 2px var(--theme-glow);
        }

        @keyframes glitch {
            0% { transform: translate(0) }
            20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) }
            60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) }
            100% { transform: translate(0) }
        }

        .loader-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .loader-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: 0.5s;
        }
        
        .loader-btn:hover::after {
            left: 100%;
        }

        .sidebar-item {
            transition: all 0.2s ease;
            position: relative;
        }
        
        .sidebar-item.active {
            background: rgba(var(--theme-primary), 0.15);
            color: rgb(var(--theme-primary));
            border-radius: 0.75rem;
            box-shadow: inset 0 1px 0 rgba(var(--theme-primary), 0.2), 0 0 15px var(--theme-glow);
        }

        .sidebar-item:hover:not(.active) {
            background: rgba(var(--theme-primary), 0.05);
            border-radius: 0.75rem;
        }

        #rain-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.3;
        }

        .input-group input:focus ~ label,
        .input-group input:not(:placeholder-shown) ~ label {
            top: -0.6rem;
            left: 0.8rem;
            font-size: 0.75rem;
            color: #fff;
            background-color: #0a0a0a; /* Fallback */
            background: linear-gradient(to bottom, transparent, #0a0a0a 50%);
            padding: 0 0.4rem;
            border-radius: 4px;
        }
    </style>
</head>
<body class="font-sans antialiased text-gray-300 selection:bg-white selection:text-black">

    <!-- Custom Titlebar -->
    <div class="custom-titlebar">
        <div class="titlebar-title">SILVA LOADER v1.0.0</div>
        <div class="titlebar-controls">
            <button class="titlebar-btn btn-minimize" onclick="minimizeWindow()"></button>
            <button class="titlebar-btn btn-maximize" onclick="maximizeWindow()"></button>
            <button class="titlebar-btn btn-close" onclick="closeWindow()"></button>
        </div>
    </div>

    <!-- Background Elements -->
    <canvas id="rain-canvas"></canvas>

    <!-- Main App Container -->
    <div class="relative z-10 w-full h-full flex items-center justify-center p-4">
        
        <!-- LOGIN VIEW -->
        <div id="login-view" class="w-full max-w-md glass-panel p-10 rounded-3xl shadow-2xl animate-fade-in relative overflow-hidden group">
            
            <div class="text-center mb-10">
                <!-- Glossy Logo Container -->
                <div class="inline-block p-4 rounded-2xl bg-white/5 border shadow-inner mb-4" style="border-color: rgba(var(--theme-primary), 0.2); box-shadow: 0 0 20px var(--theme-glow), inset 0 2px 4px rgba(0,0,0,0.2);">
                    <i data-lucide="layers" class="w-8 h-8" style="color: rgb(var(--theme-primary));"></i>
                </div>
                <h1 class="text-4xl font-bold font-mono tracking-tighter text-white mb-2 glitch-hover cursor-default drop-shadow-lg">SILVA</h1>
                <p class="text-xs text-gray-400 uppercase tracking-[0.3em] font-bold">Loader v1.0.0</p>
            </div>

            <form id="login-form" class="space-y-6">
                <div class="input-group relative">
                    <input type="text" id="username" class="peer w-full bg-black/20 border border-white/10 text-white px-5 py-4 rounded-xl outline-none transition-all duration-300 placeholder-transparent shadow-inner" placeholder="Username" style="border-color: rgba(255, 255, 255, 0.1);">
                    <label for="username" class="absolute left-5 top-4 text-gray-500 transition-all duration-300 pointer-events-none">Username</label>
                </div>

                <div class="input-group relative">
                    <input type="password" id="password" class="peer w-full bg-black/20 border border-white/10 text-white px-5 py-4 rounded-xl outline-none transition-all duration-300 placeholder-transparent shadow-inner" placeholder="Password" style="border-color: rgba(255, 255, 255, 0.1);">
                    <label for="password" class="absolute left-5 top-4 text-gray-500 transition-all duration-300 pointer-events-none">Password</label>
                </div>

                <div class="flex items-center justify-between text-xs text-gray-400 mt-2 px-1">
                    <label class="flex items-center space-x-2 cursor-pointer hover:text-white transition-colors">
                        <input type="checkbox" class="accent-white rounded bg-surface border-border">
                        <span>Remember me</span>
                    </label>
                    <a href="#" class="hover:text-white transition-colors">Forgot Password?</a>
                </div>

                <button type="submit" class="loader-btn aero-btn w-full text-black font-bold py-4 mt-6 rounded-xl uppercase tracking-wider text-sm shadow-lg transform transition-transform hover:-translate-y-0.5 active:translate-y-0">
                    Login
                </button>
            </form>
            
            <div class="mt-8 text-center border-t border-white/5 pt-4">
                <p class="text-[10px] text-gray-500 font-mono">SILVA NETWORKS // ENCRYPTED</p>
            </div>
        </div>

        <!-- MAIN DASHBOARD (Hidden initially) -->
        <div id="main-view" class="hidden glass-panel flex flex-row rounded-3xl shadow-2xl relative overflow-hidden" style="width: 1320px; height: 920px; opacity: 0;">
            
            <!-- SIDEBAR -->
            <div class="w-64 bg-black/20 border-r border-white/10 flex flex-col justify-between py-8 backdrop-blur-sm">
                <div>
                    <div class="px-6 mb-10 flex items-center space-x-3">
                        <div class="w-10 h-10 rounded-xl shadow-lg flex items-center justify-center border" style="background: linear-gradient(to br, rgb(var(--theme-primary)), rgba(var(--theme-primary), 0.6)); border-color: rgba(var(--theme-primary), 0.3); box-shadow: 0 0 20px var(--theme-glow);">
                            <i data-lucide="layers" class="text-black w-6 h-6"></i>
                        </div>
                        <div>
                            <h2 class="font-mono text-xl font-bold tracking-tight" style="color: rgb(var(--theme-primary));">SILVA</h2>
                            <p class="text-[10px] text-gray-400 uppercase tracking-wider">Loader</p>
                        </div>
                    </div>

                    <nav class="flex flex-col space-y-2 px-4">
                        <button onclick="switchTab('loader')" class="sidebar-item active w-full px-4 py-3 text-left text-sm font-medium text-gray-400 flex items-center space-x-3" data-tab="loader">
                            <i data-lucide="zap" class="w-4 h-4"></i>
                            <span>Inject</span>
                        </button>
                        <button onclick="switchTab('announcements')" class="sidebar-item w-full px-4 py-3 text-left text-sm font-medium text-gray-400 flex items-center space-x-3" data-tab="announcements">
                            <i data-lucide="megaphone" class="w-4 h-4"></i>
                            <span>Announcements</span>
                        </button>
                        <button onclick="switchTab('changelog')" class="sidebar-item w-full px-4 py-3 text-left text-sm font-medium text-gray-400 flex items-center space-x-3" data-tab="changelog">
                            <i data-lucide="file-text" class="w-4 h-4"></i>
                            <span>Changelog</span>
                        </button>
                        <button onclick="switchTab('settings')" class="sidebar-item w-full px-4 py-3 text-left text-sm font-medium text-gray-400 flex items-center space-x-3" data-tab="settings">
                            <i data-lucide="settings" class="w-4 h-4"></i>
                            <span>Settings</span>
                        </button>
                        <button onclick="switchTab('credits')" class="sidebar-item w-full px-4 py-3 text-left text-sm font-medium text-gray-400 flex items-center space-x-3" data-tab="credits">
                            <i data-lucide="users" class="w-4 h-4"></i>
                            <span>Credits</span>
                        </button>
                    </nav>
                </div>

                <div class="px-6">
                    <div class="flex items-center space-x-3 p-3 bg-white/5 border border-white/10 rounded-xl shadow-inner backdrop-blur-md">
                        <div class="w-8 h-8 bg-gradient-to-br from-gray-700 to-black rounded-full flex items-center justify-center text-xs font-bold border border-white/20 shadow">S</div>
                        <div class="overflow-hidden">
                            <p class="text-sm font-bold text-white truncate w-24" id="display-username">Silva</p>
                            <p class="text-[10px] font-mono flex items-center gap-1" style="color: rgb(var(--theme-primary));">
                                <span class="w-1.5 h-1.5 rounded-full animate-pulse" style="background: rgb(var(--theme-primary)); box-shadow: 0 0 5px var(--theme-glow);"></span> Online
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CONTENT AREA -->
            <div class="flex-1 p-10 relative overflow-hidden flex flex-col bg-gradient-to-br from-transparent to-black/30">
                
                <!-- STATUS BAR -->
                <div class="flex justify-between items-center mb-8 pb-4 border-b border-white/10">
                    <h3 id="page-title" class="text-2xl font-bold font-mono tracking-tight text-white drop-shadow-md">DASHBOARD</h3>
                    <div class="flex items-center space-x-4 text-xs font-mono text-gray-500 bg-black/20 px-3 py-1 rounded-full border border-white/5">
                        <span>PING: 24ms</span>
                        <span class="text-white/20">|</span>
                        <span>VER: 1.0.0</span>
                    </div>
                </div>

                <!-- LOADER TAB -->
                <div id="tab-loader" class="tab-content h-full flex flex-col overflow-y-auto custom-scrollbar px-2">
                    <!-- Game Mode Selection -->
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                            <i data-lucide="gamepad-2" class="w-5 h-5"></i>
                            SELECT GAME MODE
                        </h4>
                        <div class="grid grid-cols-2 gap-4 max-w-xl mx-auto">
                            <!-- Minecraft Mode -->
                            <button id="mode-minecraft" onclick="handleMinecraftClick()" class="game-mode-btn group relative p-5 bg-white/5 border rounded-xl transition-all duration-500 hover:shadow-2xl" style="border-color: rgba(var(--theme-primary), 0.2);">
                                <div class="absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl pointer-events-none" style="background: linear-gradient(to bottom right, rgba(255, 255, 255, 0.1), transparent);"></div>
                                <div class="relative z-10 text-center space-y-2 transition-all duration-500 group-hover:scale-105">
                                    <div class="w-14 h-14 mx-auto bg-white/10 border border-white/20 rounded-lg flex items-center justify-center shadow-lg transition-all duration-500 group-hover:shadow-white/50 group-hover:scale-110">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-all duration-500 group-hover:scale-110">
                                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                            <rect x="7" y="7" width="3" height="9"></rect>
                                            <rect x="14" y="7" width="3" height="5"></rect>
                                        </svg>
                                    </div>
                                    <div class="transition-all duration-300">
                                        <h5 class="font-bold text-white text-base group-hover:text-lg transition-all duration-300">MINECRAFT</h5>
                                        <p class="text-[11px] text-gray-400 mt-0.5 group-hover:text-xs transition-all duration-300">Java Edition</p>
                                    </div>
                                </div>
                            </button>

                            <!-- FPS Mode -->
                            <button id="mode-fps" onclick="handleFpsClick()" class="game-mode-btn group relative p-5 bg-white/5 border rounded-xl transition-all duration-500 hover:shadow-2xl" style="border-color: rgba(var(--theme-primary), 0.2);">
                                <div class="absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl pointer-events-none" style="background: linear-gradient(to bottom right, rgba(var(--theme-primary), 0.1), transparent);"></div>
                                <div class="relative z-10 text-center space-y-2 transition-all duration-500 group-hover:scale-105">
                                    <div class="w-14 h-14 mx-auto rounded-lg flex items-center justify-center shadow-lg transition-all duration-500 group-hover:scale-110" style="background: linear-gradient(to bottom right, rgb(var(--theme-primary)), rgba(var(--theme-primary), 0.7)); box-shadow: 0 10px 25px -5px rgba(var(--theme-primary), 0.3);">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-all duration-500 group-hover:scale-110">
                                            <circle cx="12" cy="12" r="1"></circle>
                                            <circle cx="12" cy="12" r="5"></circle>
                                            <circle cx="12" cy="12" r="10"></circle>
                                        </svg>
                                    </div>
                                    <div class="transition-all duration-300">
                                        <h5 class="font-bold text-white text-base group-hover:text-lg transition-all duration-300">FPS GAMES</h5>
                                        <p class="text-[11px] text-gray-400 mt-0.5 group-hover:text-xs transition-all duration-300">Manual Selection</p>
                                    </div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <!-- Injection Controls (Initially Hidden) -->
                    <div id="injection-controls" class="hidden">
                        <div class="bg-white/5 border border-white/10 rounded-2xl p-6 space-y-6">
                            <!-- Selected Process Display -->
                            <div id="selected-process-display" class="hidden">
                                <h5 class="text-sm font-bold text-gray-400 mb-2">SELECTED PROCESS</h5>
                                <div class="flex items-center justify-between p-4 bg-black/30 border rounded-xl" style="border-color: rgba(var(--theme-primary), 0.2);">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-lg flex items-center justify-center" style="background: rgba(var(--theme-primary), 0.1);">
                                            <i data-lucide="cpu" class="w-5 h-5" style="color: rgb(var(--theme-primary));"></i>
                                        </div>
                                        <div>
                                            <p class="font-bold text-white" id="selected-process-name">No process selected</p>
                                            <p class="text-xs text-gray-500" id="selected-process-pid">PID: ---</p>
                                        </div>
                                    </div>
                                    <button id="change-process-btn" class="px-4 py-2 bg-white/5 border rounded-lg text-xs font-semibold transition-all hover:scale-105" style="border-color: rgba(var(--theme-primary), 0.3); color: rgb(var(--theme-primary));">
                                        CHANGE
                                    </button>
                                </div>
                            </div>

                            <!-- DLL Selection -->
                            <div id="dll-selection-section" class="hidden">
                                <h5 class="text-sm font-bold text-gray-400 mb-2">DLL FILE</h5>
                                <div class="flex items-center justify-between p-4 bg-black/30 border border-white/10 rounded-xl">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 bg-purple-500/20 border border-purple-500/30 rounded-lg flex items-center justify-center">
                                            <i data-lucide="file-code" class="w-5 h-5 text-purple-400"></i>
                                        </div>
                                        <div>
                                            <p class="font-bold text-white" id="selected-dll-name">No DLL selected</p>
                                            <p class="text-xs text-gray-500" id="selected-dll-path">Click gear to select DLL</p>
                                        </div>
                                    </div>
                                    <button id="select-dll-btn" class="w-10 h-10 bg-white/5 border border-purple-500/30 rounded-lg flex items-center justify-center transition-all hover:scale-110 hover:bg-purple-500/10">
                                        <i data-lucide="settings" class="w-5 h-5 text-purple-400"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Inject Button -->
                            <button id="inject-btn-fps" class="w-full group relative px-8 py-5 font-bold text-lg tracking-widest uppercase overflow-hidden rounded-2xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed" style="background: linear-gradient(to bottom, rgb(var(--theme-primary)) 0%, rgba(var(--theme-primary), 0.8) 100%); box-shadow: 0 0 30px var(--theme-glow), 0 4px 15px rgba(0,0,0,0.3); color: #000;" disabled>
                                <span class="relative z-10" id="inject-text-fps">SELECT PROCESS & DLL</span>
                                <div class="absolute inset-0 bg-gradient-to-b from-white/20 via-transparent to-black/20 z-0 pointer-events-none"></div>
                            </button>
                        </div>
                    </div>

                    <!-- Minecraft Auto-Inject (Initially Hidden) -->
                    <div id="minecraft-inject" class="hidden">
                        <div class="flex flex-col justify-center items-center space-y-6 py-8">
                            <div id="mc-status-badge" class="inline-block px-4 py-1.5 rounded-full border text-xs font-bold tracking-wide animate-float" style="border-color: rgba(var(--theme-primary), 0.3); background: rgba(var(--theme-primary), 0.1); color: rgb(var(--theme-primary)); box-shadow: 0 0 15px var(--theme-glow);">
                                MINECRAFT MODE
                            </div>
                            
                            <h2 class="text-4xl font-black text-white">READY TO INJECT</h2>
                            
                            <p class="text-gray-400 max-w-md mx-auto text-center text-sm">
                                Ready to inject into Minecraft Java Edition.
                            </p>

                            <button id="inject-btn-mc" class="group relative px-16 py-5 font-bold text-lg tracking-widest uppercase overflow-hidden rounded-2xl transition-all duration-300 hover:scale-105" style="background: linear-gradient(to bottom, rgb(var(--theme-primary)) 0%, rgba(var(--theme-primary), 0.8) 100%); box-shadow: 0 0 30px var(--theme-glow), 0 4px 15px rgba(0,0,0,0.3); color: #000;">
                                <span class="relative z-10">INJECT</span>
                                <div class="absolute inset-0 bg-gradient-to-b from-white/20 via-transparent to-black/20 z-0 pointer-events-none"></div>
                            </button>

                            <!-- Action Buttons -->
                            <div class="flex gap-4 mt-4 justify-center">
                                <button id="hide-tray-btn-mc" class="flex items-center gap-2 px-5 py-2.5 bg-white/5 border rounded-xl font-semibold text-xs transition-all duration-300 hover:scale-105" style="border-color: rgba(var(--theme-primary), 0.3); color: rgb(var(--theme-primary));">
                                    <i data-lucide="eye-off" class="w-4 h-4"></i>
                                    HIDE TO TRAY
                                </button>
                                <button id="self-destruct-btn-mc" class="flex items-center gap-2 px-5 py-2.5 bg-white/5 border border-red-500/30 rounded-xl font-semibold text-xs text-red-400 transition-all duration-300 hover:scale-105 hover:bg-red-500/10 hover:border-red-500/50">
                                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                                    SELF DESTRUCT
                                </button>
                            </div>

                            <button id="back-to-modes" onclick="handleBackToModes()" class="mt-4 text-sm text-gray-500 hover:text-white transition-colors flex items-center gap-2">
                                <i data-lucide="arrow-left" class="w-4 h-4"></i>
                                Back to Mode Selection
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ANNOUNCEMENTS TAB -->
                <div id="tab-announcements" class="tab-content hidden h-full overflow-y-auto pr-2 animate-fade-in custom-scrollbar">
                    <div class="max-w-4xl mx-auto">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 rounded-xl flex items-center justify-center" style="background: rgba(var(--theme-primary), 0.1);">
                                <i data-lucide="megaphone" class="w-5 h-5" style="color: rgb(var(--theme-primary));"></i>
                            </div>
                            <div>
                                <h3 class="text-2xl font-bold text-white">Announcements</h3>
                                <p class="text-sm text-gray-400">Latest updates and news</p>
                            </div>
                        </div>

                        <div id="announcements-container" class="space-y-3">
                            <!-- Announcements will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- CHANGELOG TAB -->
                <div id="tab-changelog" class="tab-content hidden h-full overflow-y-auto pr-2 animate-fade-in custom-scrollbar">
                    <div class="space-y-6">
                        <div class="bg-white/5 p-6 rounded-2xl border border-white/5">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-xl font-bold text-white">v1.0.0 <span class="px-2 py-0.5 ml-2 text-[10px] bg-white text-black rounded font-bold uppercase">Latest</span></h4>
                                <span class="text-xs text-gray-500">Today</span>
                            </div>
                            <ul class="space-y-3 text-sm text-gray-300">
                                <li class="flex items-start">
                                    <div class="w-1.5 h-1.5 rounded-full bg-white mt-1.5 mr-3 shadow-[0_0_5px_white]"></div>
                                    <span>Rebranded to <strong class="text-white">SilvaLoader</strong></span>
                                </li>
                                <li class="flex items-start">
                                    <div class="w-1.5 h-1.5 rounded-full bg-white mt-1.5 mr-3 shadow-[0_0_5px_white]"></div>
                                    <span>Added Aero Glass UI aesthetic</span>
                                </li>
                                <li class="flex items-start">
                                    <div class="w-1.5 h-1.5 rounded-full bg-white mt-1.5 mr-3 shadow-[0_0_5px_white]"></div>
                                    <span>Implemented rounded design language</span>
                                </li>
                                <li class="flex items-start">
                                    <div class="w-1.5 h-1.5 rounded-full bg-white mt-1.5 mr-3 shadow-[0_0_5px_white]"></div>
                                    <span>Optimized rain rendering engine</span>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="bg-white/5 p-6 rounded-2xl border border-white/5 opacity-60">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-lg font-bold text-gray-300">v0.9.5 <span class="px-2 py-0.5 ml-2 text-[10px] bg-gray-700 text-white rounded font-bold uppercase">Beta</span></h4>
                                <span class="text-xs text-gray-500">Last Week</span>
                            </div>
                            <ul class="space-y-3 text-sm text-gray-500">
                                <li class="flex items-start">
                                    <div class="w-1.5 h-1.5 rounded-full bg-gray-500 mt-1.5 mr-3"></div>
                                    <span>Initial core injection logic</span>
                                </li>
                                <li class="flex items-start">
                                    <div class="w-1.5 h-1.5 rounded-full bg-gray-500 mt-1.5 mr-3"></div>
                                    <span>Fixed memory leaks</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- SETTINGS TAB -->
                <div id="tab-settings" class="tab-content hidden h-full overflow-y-auto animate-fade-in">
                    <div class="space-y-6">
                        <div class="bg-white/5 p-6 rounded-2xl border border-white/5">
                            <h4 class="text-sm font-bold uppercase text-gray-400 mb-6 tracking-wider">Injection Settings</h4>
                            <div class="space-y-5">
                                <div class="flex items-center justify-between group">
                                    <div>
                                        <p class="text-sm font-medium text-white">Auto-Inject on Startup</p>
                                        <p class="text-xs text-gray-500">Automatically inject when game is found</p>
                                    </div>
                                    <div class="w-12 h-6 bg-white/10 rounded-full relative cursor-pointer transition-all duration-300 group-hover:bg-white/20">
                                        <div class="absolute left-1 top-1 w-4 h-4 bg-gray-400 rounded-full shadow-md transition-all"></div>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between group">
                                    <div>
                                        <p class="text-sm font-medium text-white">Close Loader</p>
                                        <p class="text-xs text-gray-500">Terminate loader process after injection</p>
                                    </div>
                                    <div class="w-12 h-6 bg-white rounded-full relative cursor-pointer shadow-[0_0_10px_rgba(255,255,255,0.3)]">
                                        <div class="absolute right-1 top-1 w-4 h-4 bg-black rounded-full shadow-md"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white/5 p-6 rounded-2xl border border-white/5">
                            <h4 class="text-sm font-bold uppercase text-gray-400 mb-6 tracking-wider">Interface</h4>
                            <div class="space-y-6">
                                <div class="flex flex-col space-y-3">
                                    <div class="flex justify-between text-xs font-bold text-gray-400">
                                        <span>Glass Opacity</span>
                                        <span id="opacity-value">60%</span>
                                    </div>
                                    <input type="range" id="opacity-slider" min="20" max="100" value="60" class="w-full h-2 bg-gray-800 rounded-full appearance-none cursor-pointer" style="background: linear-gradient(to right, rgb(var(--theme-primary)) 60%, #1f2937 60%);">
                                </div>
                                
                                <div class="flex flex-col space-y-3">
                                    <div class="text-xs font-bold text-gray-400">Theme Color</div>
                                    <div class="flex gap-2 flex-wrap">
                                        <button onclick="setTheme('white', '255, 255, 255')" class="theme-btn w-8 h-8 rounded-full bg-white border-2 border-white/20 hover:scale-110 transition-all shadow-lg" data-theme="white"></button>
                                        <button onclick="setTheme('blue', '59, 130, 246')" class="theme-btn w-8 h-8 rounded-full bg-blue-500 border-2 border-transparent hover:scale-110 transition-all shadow-lg" data-theme="blue"></button>
                                        <button onclick="setTheme('purple', '168, 85, 247')" class="theme-btn w-8 h-8 rounded-full bg-purple-500 border-2 border-transparent hover:scale-110 transition-all shadow-lg" data-theme="purple"></button>
                                        <button onclick="setTheme('red', '239, 68, 68')" class="theme-btn w-8 h-8 rounded-full bg-red-500 border-2 border-transparent hover:scale-110 transition-all shadow-lg" data-theme="red"></button>
                                        <button onclick="setTheme('green', '34, 197, 94')" class="theme-btn w-8 h-8 rounded-full bg-green-500 border-2 border-transparent hover:scale-110 transition-all shadow-lg" data-theme="green"></button>
                                        <button onclick="setTheme('orange', '249, 115, 22')" class="theme-btn w-8 h-8 rounded-full bg-orange-500 border-2 border-transparent hover:scale-110 transition-all shadow-lg" data-theme="orange"></button>
                                        <button onclick="setTheme('yellow', '234, 179, 8')" class="theme-btn w-8 h-8 rounded-full bg-yellow-500 border-2 border-transparent hover:scale-110 transition-all shadow-lg" data-theme="yellow"></button>
                                        <button onclick="setTheme('cyan', '6, 182, 212')" class="theme-btn w-8 h-8 rounded-full bg-cyan-500 border-2 border-transparent hover:scale-110 transition-all shadow-lg" data-theme="cyan"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CREDITS TAB -->
                <div id="tab-credits" class="tab-content hidden h-full flex flex-col items-center justify-center animate-fade-in text-center">
                    <h2 class="text-3xl font-mono font-bold mb-10 text-white drop-shadow-lg">CREDITS</h2>
                    
                    <div class="w-full max-w-md">
                        <div class="group p-8 bg-white/5 border border-white/5 rounded-3xl hover:bg-white/10 hover:scale-105 transition-all cursor-default shadow-2xl">
                            <div class="w-20 h-20 bg-gradient-to-br from-white to-gray-300 mx-auto mb-6 flex items-center justify-center text-black font-bold text-3xl rounded-2xl shadow-lg ring-4 ring-white/5">S</div>
                            <h4 class="text-2xl font-bold text-white mb-2">Silva</h4>
                            <p class="text-sm text-gray-400 uppercase tracking-widest font-bold">All Credits to Silva</p>
                            <div class="mt-6 h-1 w-16 bg-white/20 mx-auto rounded-full"></div>
                            <p class="mt-6 text-gray-400 text-sm leading-relaxed">
                                Lead Developer & Designer
                            </p>
                        </div>
                    </div>
                    
                    <p class="mt-12 text-xs text-gray-600 font-mono">Â© 2026 Silva Development.</p>
                </div>

            </div>
        </div>
    </div>

    <!-- Process Selector Modal -->
    <div id="process-modal" class="fixed inset-0 z-[10000] hidden flex items-center justify-center p-6" style="background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(10px);">
        <div class="w-full overflow-hidden animate-scale-in" style="max-width: 70rem; max-height: 92vh; background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 24px; box-shadow: 0 25px 80px rgba(0, 0, 0, 0.7), 0 0 1px rgba(255, 255, 255, 0.1) inset;">
            <!-- Modal Header -->
            <div class="p-8 flex items-center justify-between" style="border-bottom: 1px solid rgba(255, 255, 255, 0.05); background: linear-gradient(to bottom, rgba(255, 255, 255, 0.02), transparent);">
                <div class="flex items-center gap-4">
                    <div class="w-11 h-11 rounded-xl flex items-center justify-center" style="background: rgba(255, 255, 255, 0.06); border: 1px solid rgba(255, 255, 255, 0.08);">
                        <i data-lucide="cpu" class="w-6 h-6 text-white"></i>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-white tracking-tight">Process Selection</h3>
                        <p class="text-sm text-gray-500 mt-0.5">Choose target for injection</p>
                    </div>
                </div>
                <button id="close-process-modal" class="w-10 h-10 rounded-lg flex items-center justify-center transition-all hover:scale-105" style="background: rgba(255, 255, 255, 0.04); border: 1px solid rgba(255, 255, 255, 0.06);" onmouseover="this.style.background='rgba(255, 255, 255, 0.08)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.04)'">
                    <i data-lucide="x" class="w-5 h-5 text-gray-400"></i>
                </button>
            </div>

            <!-- Search Bar -->
            <div class="px-8 pt-6 pb-4">
                <div class="relative">
                    <input type="text" id="process-search" placeholder="Search by process name or PID..." class="w-full px-4 py-3.5 pl-11 text-white text-sm placeholder-gray-600 focus:outline-none transition-all" style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 255, 255, 0.06); border-radius: 12px;" onfocus="this.style.borderColor='rgba(255, 255, 255, 0.12)'; this.style.background='rgba(0, 0, 0, 0.5)'" onblur="this.style.borderColor='rgba(255, 255, 255, 0.06)'; this.style.background='rgba(0, 0, 0, 0.4)'">
                    <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"></i>
                </div>
            </div>

            <!-- Process List -->
            <div id="process-list-container" class="px-8 pb-8 overflow-y-auto custom-scrollbar" style="max-height: 580px;">
                <div id="process-list" class="space-y-2">
                    <!-- Processes will be loaded here -->
                    <div class="text-center py-12 text-gray-500">
                        <i data-lucide="loader" class="w-8 h-8 mx-auto mb-3 animate-spin"></i>
                        <p>Loading processes...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- DLL File Selector (uses webview file dialog) -->

    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        /* --- RAIN ANIMATION SETUP --- */
        const canvas = document.getElementById('rain-canvas');
        const ctx = canvas.getContext('2d');

        let width, height;
        let drops = [];
        const maxDrops = 150; 

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        class Drop {
            constructor() {
                this.reset();
                this.y = Math.random() * height; // Start anywhere initially
            }

            reset() {
                this.x = Math.random() * width;
                this.y = -20;
                this.speed = Math.random() * 4 + 5; 
                this.len = Math.random() * 30 + 20; // Increased length (was 20+10)
                this.opacity = Math.random() * 0.3 + 0.1;
                this.width = Math.random() * 3 + 2; // Increased width (was 2+1)
            }

            update() {
                this.y += this.speed;
                if (this.y > height) {
                    this.reset();
                }
            }

            draw() {
                ctx.beginPath();
                // Gradient for the drop
                const grad = ctx.createLinearGradient(this.x, this.y, this.x, this.y + this.len);
                grad.addColorStop(0, `rgba(255, 255, 255, 0)`); // Fade tail
                grad.addColorStop(1, `rgba(255, 255, 255, ${this.opacity})`); // White head
                
                ctx.strokeStyle = grad;
                ctx.lineWidth = this.width;
                ctx.lineCap = 'round'; // Rounded rain drops
                ctx.moveTo(this.x, this.y);
                ctx.lineTo(this.x, this.y + this.len);
                ctx.stroke();
            }
        }

        function initRain() {
            resize();
            for (let i = 0; i < maxDrops; i++) {
                drops.push(new Drop());
            }
            animateRain();
        }

        function animateRain() {
            ctx.clearRect(0, 0, width, height);
            drops.forEach(drop => {
                drop.update();
                drop.draw();
            });
            requestAnimationFrame(animateRain);
        }

        window.addEventListener('resize', resize);
        initRain();


        /* --- UI LOGIC --- */
        const loginForm = document.getElementById('login-form');
        const loginView = document.getElementById('login-view');
        const mainView = document.getElementById('main-view');
        const displayUsername = document.getElementById('display-username');

        // Handle Login - ZERO BLOCKING VERSION
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Set username
            displayUsername.textContent = username;
            
            // Pure CSS transition - no JS blocking
            loginView.style.transition = 'opacity 0.15s linear';
            mainView.style.transition = 'opacity 0.15s linear';
            
            mainView.classList.remove('hidden');
            mainView.style.display = 'flex';
            mainView.style.opacity = '0';
            
            // Trigger immediately
            loginView.style.opacity = '0';
            
            // Fade in main view
            requestAnimationFrame(() => {
                mainView.style.opacity = '1';
            });
            
            // Cleanup after transition
            setTimeout(() => {
                loginView.style.display = 'none';
                loginView.style.opacity = '1';
            }, 150);
            
            // Icons in next frame to avoid blocking
            requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    lucide.createIcons();
                    applyThemeToInputs();
                });
            });

            // Validate in background - completely non-blocking
            setTimeout(() => {
                fetch('/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, password })
                }).catch(e => console.log('Login request:', e));
            }, 200);
        });

        // Handle Sidebar Navigation
        function switchTab(tabName) {
            // Update Sidebar Active State
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
                if(item.dataset.tab === tabName) {
                    item.classList.add('active');
                }
            });

            // Smooth transition between tabs
            const allTabs = document.querySelectorAll('.tab-content');
            const selectedContent = document.getElementById(`tab-${tabName}`);
            
            // Fade out all tabs
            allTabs.forEach(tab => {
                if (!tab.classList.contains('hidden')) {
                    tab.style.transition = 'opacity 0.15s ease';
                    tab.style.opacity = '0';
                }
            });
            
            // After fade out, switch content
            setTimeout(() => {
                allTabs.forEach(content => {
                    content.classList.add('hidden');
                    content.style.opacity = '1';
                });
                
                // Show selected with fade in
                selectedContent.classList.remove('hidden');
                selectedContent.style.opacity = '0';
                
                requestAnimationFrame(() => {
                    selectedContent.style.transition = 'opacity 0.15s ease';
                    selectedContent.style.opacity = '1';
                });
            }, 150);

            // Update Page Title
            const titleMap = {
                'loader': 'DASHBOARD',
                'changelog': 'CHANGELOG',
                'settings': 'SETTINGS',
                'credits': 'CREDITS'
            };
            document.getElementById('page-title').textContent = titleMap[tabName];
        }

        // Handle Injection
        const injectBtn = document.getElementById('inject-btn');
        const injectText = document.getElementById('inject-text');
        const injectProgress = document.getElementById('inject-progress');
        let isInjecting = false;
        
        // Add hover effect
        injectBtn.addEventListener('mouseenter', function() {
            if (!isInjecting) {
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = `0 0 40px var(--theme-glow), 0 6px 20px rgba(0,0,0,0.4)`;
            }
        });
        injectBtn.addEventListener('mouseleave', function() {
            if (!isInjecting) {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = `0 0 30px var(--theme-glow), 0 4px 15px rgba(0,0,0,0.3)`;
            }
        });

        injectBtn.addEventListener('click', async () => {
            if(isInjecting) return;
            isInjecting = true;
            
            injectText.textContent = "INITIALIZING...";
            injectProgress.style.transform = "scaleX(1)";

            setTimeout(() => {
                injectText.textContent = "INJECTING...";
            }, 1000);

            try {
                const response = await fetch('/inject', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });

                const data = await response.json();

                setTimeout(() => {
                    if (data.success) {
                        injectText.textContent = "SUCCESS";
                        injectText.classList.add('text-black');
                        injectProgress.classList.add('brightness-125');
                    } else {
                        injectText.textContent = "FAILED";
                    }
                    
                    isInjecting = false;

                    // Reset after 3 seconds
                    setTimeout(() => {
                        injectText.textContent = "INJECT";
                        injectText.classList.remove('text-black');
                        injectProgress.classList.remove('brightness-125');
                        
                        injectProgress.style.transition = 'none';
                        injectProgress.style.transform = "scaleX(0)";
                        
                        setTimeout(() => {
                            injectProgress.style.transition = 'transform 2000ms linear';
                        }, 50);
                    }, 3000);
                }, 1000);
            } catch (error) {
                console.error('Injection error:', error);
                injectText.textContent = "ERROR";
                isInjecting = false;
            }
        });

        // Handle Logout
        function logout() {
            fetch('/logout', { method: 'POST' })
                .then(() => {
                    mainView.style.willChange = 'opacity, transform';
                    mainView.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                    mainView.style.opacity = '0';
                    mainView.style.transform = 'scale(0.95)';
                    
                    setTimeout(() => {
                        mainView.classList.add('hidden');
                        mainView.style.opacity = '1';
                        mainView.style.transform = 'scale(1)';
                        mainView.style.willChange = 'auto';
                        
                        loginView.style.display = 'block';
                        loginView.style.willChange = 'opacity, transform';
                        loginView.style.opacity = '0';
                        loginView.style.transform = 'scale(0.95)';
                        
                        void loginView.offsetWidth;
                        
                        loginView.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                        loginView.style.opacity = '1';
                        loginView.style.transform = 'scale(1)';
                        
                        setTimeout(() => {
                            loginView.style.willChange = 'auto';
                        }, 300);
                        
                        // Clear form
                        document.getElementById('username').value = '';
                        document.getElementById('password').value = '';
                    }, 300);
                })
                .catch(error => console.error('Logout error:', error));
        }
        
        // Handle Hide to Tray
        document.getElementById('hide-tray-btn')?.addEventListener('click', function() {
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
                if (window.pywebview) {
                    window.pywebview.api.hide_to_tray();
                }
            }, 100);
        });
        
        // Handle Self Destruct
        document.getElementById('self-destruct-btn')?.addEventListener('click', function() {
            this.style.transform = 'scale(0.95)';
            this.style.animation = 'pulse 0.3s ease-in-out 3';
            
            setTimeout(() => {
                if (confirm('â ï¸ WARNING: This will permanently delete the application. Are you sure?')) {
                    // Add explosion animation
                    const btn = this;
                    btn.innerHTML = '<span class="animate-pulse">ð¥ DELETING...</span>';
                    
                    setTimeout(() => {
                        if (window.pywebview) {
                            window.pywebview.api.close_window();
                        }
                    }, 1500);
                }
                this.style.transform = 'scale(1)';
            }, 100);
        });

        // Apply theme to input fields
        function applyThemeToInputs() {
            const inputs = document.querySelectorAll('input[type="text"], input[type="password"]');
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    this.style.borderColor = `rgba(var(--theme-primary), 0.5)`;
                    this.style.boxShadow = `0 0 15px var(--theme-glow)`;
                });
                input.addEventListener('blur', function() {
                    this.style.borderColor = 'rgba(255, 255, 255, 0.1)';
                    this.style.boxShadow = 'inset 0 2px 4px rgba(0, 0, 0, 0.1)';
                });
            });
        }
        
        // Initialize on load
        applyThemeToInputs();

        // Opacity Slider
        const opacitySlider = document.getElementById('opacity-slider');
        const opacityValue = document.getElementById('opacity-value');
        
        if (opacitySlider) {
            opacitySlider.addEventListener('input', (e) => {
                const value = e.target.value;
                const percent = value + '%';
                opacityValue.textContent = percent;
                
                // Update CSS variable
                document.documentElement.style.setProperty('--glass-opacity', value / 100);
                
                // Update slider background
                e.target.style.background = `linear-gradient(to right, rgb(var(--theme-primary)) ${value}%, #1f2937 ${value}%)`;
                
                // Save to localStorage
                localStorage.setItem('glass-opacity', value);
            });
            
            // Load saved opacity
            const savedOpacity = localStorage.getItem('glass-opacity');
            if (savedOpacity) {
                opacitySlider.value = savedOpacity;
                opacityValue.textContent = savedOpacity + '%';
                document.documentElement.style.setProperty('--glass-opacity', savedOpacity / 100);
                opacitySlider.style.background = `linear-gradient(to right, rgb(var(--theme-primary)) ${savedOpacity}%, #1f2937 ${savedOpacity}%)`;
            }
        }
        
        // Theme System
        function setTheme(name, rgb) {
            document.documentElement.style.setProperty('--theme-primary', rgb);
            document.documentElement.style.setProperty('--theme-glow', `rgba(${rgb}, 0.3)`);
            
            // Update all theme buttons
            document.querySelectorAll('.theme-btn').forEach(btn => {
                if (btn.dataset.theme === name) {
                    btn.style.borderColor = `rgb(${rgb})`;
                    btn.style.boxShadow = `0 0 20px rgba(${rgb}, 0.6), inset 0 0 10px rgba(${rgb}, 0.3)`;
                } else {
                    btn.style.borderColor = 'transparent';
                    btn.style.boxShadow = '';
                }
            });
            
            // Update opacity slider
            const slider = document.getElementById('opacity-slider');
            if (slider) {
                slider.style.background = `linear-gradient(to right, rgb(${rgb}) ${slider.value}%, #1f2937 ${slider.value}%)`;
            }
            
            // Save to localStorage
            localStorage.setItem('theme-name', name);
            localStorage.setItem('theme-rgb', rgb);
        }
        
        // Load saved theme
        const savedTheme = localStorage.getItem('theme-name');
        const savedRgb = localStorage.getItem('theme-rgb');
        if (savedTheme && savedRgb) {
            setTheme(savedTheme, savedRgb);
        }

        // Window Controls
        function minimizeWindow() {
            if (window.pywebview) {
                window.pywebview.api.minimize_window();
            }
        }

        function maximizeWindow() {
            if (window.pywebview) {
                window.pywebview.api.maximize_window();
            }
        }

        function closeWindow() {
            if (window.pywebview) {
                window.pywebview.api.close_window();
            } else {
                window.close();
            }
        }

    </script>
    <script src="/premium-features.js"></script>
</body>
</html>
</html>